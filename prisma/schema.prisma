// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  // for local development
  // url       = env("DATABASE_URL")
  // for Vercel
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

// Role or privilege of an account.

enum AccountPrivilege {
  USER
  ADMINISTRATOR
}

//  Stock status of a merchandise.

enum MerchStockStatus {
  ON_STOCK
  SOLD
  RECALLED
}

//  SI and imperial units for length.

enum LengthUnit {
  MILLIMETER
  CENTIMETER
  DECIMETER
  METER

  INCH
  FEET
  YARD
  MILE
}

//  SI and imperial units for mass.

enum MassUnit {
  MILLIGRAM
  GRAM
  KILOGRAM
  TON

  OUNCE
  POUND
}

//  Tags that categorizes a merchandise.

enum MerchTag {
  COLLECTABLE
  ELECTRONIC
  FICTIONAL
  FURNITURE
  HYGIENE_EQUIPMENT
  KITCHENWARE
  SCHOOL_SUPPLY
  SPORT_EQUIPMENT
}

//  How new is a merchandise.

enum MerchCondition {
  NEW
  EXCELLENT
  GOOD
  FAIR
  POOR
}

//  Main material that a merchandise is made of.

enum MerchMaterial {
  ALUMINUM
  BAMBOO
  BRASS
  BRONZE
  CARBON
  CERAMIC
  CLOTH
  COPPER
  FABRIC
  GLASS
  GOLD
  IRON
  LEATHER
  PAPER
  PLASTIC
  RUBBER
  SILVER
  STEEL
  STONE
  TITANIUM
  WOOD
  OTHER
}

//  Stores account and user information.

model Account {
  AccountID    Int              @id @unique @default(autoincrement())
  Privilege    AccountPrivilege @default(USER)
  Username     String           @unique
  Password     String
  EmailAddress String           @unique
  FirstName    String
  LastName     String

  merch Merch[]
}

//  Stores merchandise information. There is one to many correspondence between Account and Merch.

model Merch {
  MerchID     Int              @id @unique @default(autoincrement())
  AccountID   Int
  PostTime    DateTime         @default(now())
  StockStatus MerchStockStatus
  Price       Float
  Name        String
  Description String
  Image       MerchImage[]
  Length      Float
  Width       Float
  Height      Float
  Mass        Float
  LUnit       LengthUnit
  WUnit       LengthUnit
  HUnit       LengthUnit
  MUnit       MassUnit
  Material    MerchMaterial
  Condition   MerchCondition

  seller Account @relation(fields: [AccountID], references: [AccountID])
}

model MerchImage {
  ImageID      Int      @id @unique @default(autoincrement())
  MerchID      Int
  FileName     String
  MIMEType     String // Type of file.
  Data         Bytes // Image itself.
  CreationTime DateTime @default(now())

  merch Merch @relation(fields: [MerchID], references: [MerchID])
}

enum Role {
  USER
  ADMIN
}
